import{U as D,$ as C,a3 as t,b as L,c as A,a8 as Ot,i as Le,p as Se,E as pe,D as Tt,y as Me,N as ee,J as he,L as nt,a9 as lt,w as je,n as ne,j as te,a4 as S,P as $,X as T,W as G,a5 as B,aa as Ue,ab as se,a7 as Z,ac as Y,ad as $e,ae as We,af as Pt,a6 as Ke,T as Mt,V as xe,ag as At}from"./BD3EHYnG.js";import{c as Ee,d as Lt,u as jt,s as Ht,n as Rt}from"./CQA7Wwdt.js";import{_ as Ze}from"./vMbIc8Zx.js";import{_ as le}from"./DRujum_f.js";import{u as Ft}from"./BDzxMlPQ.js";import{u as It,r as Ce,a as Nt}from"./CW0Jp0j1.js";import{l as J,i as Bt}from"./DzHiA6Ss.js";import{s as it}from"./XJu-Dphy.js";import{r as ye}from"./DUHIDQUa.js";import{r as Oe}from"./DoWbjU6U.js";import{r as Qe,a as me}from"./DdkjCulK.js";function fe(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})])}function Te(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}function Ge(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Je(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}function Vt(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function we(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Xe(e,r){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function zt(e,r,o){let l=L(o?.value),u=A(()=>e.value!==void 0);return[A(()=>u.value?e.value:l.value),function(d){return u.value||(l.value=d),r?.(d)}]}var Ye;let qt=Symbol("headlessui.useid"),Ut=0;const He=(Ye=Ot)!=null?Ye:function(){return Le(qt,()=>`${++Ut}`)()};function z(e){var r;if(e==null||e.value==null)return null;let o=(r=e.value.$el)!=null?r:e.value;return o instanceof Node?o:null}function ae(e,r,...o){if(e in r){let u=r[e];return typeof u=="function"?u(...o):u}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(r).map(u=>`"${u}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,ae),l}var Wt=Object.defineProperty,Kt=(e,r,o)=>r in e?Wt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,et=(e,r,o)=>(Kt(e,typeof r!="symbol"?r+"":r,o),o);let Zt=class{constructor(){et(this,"current",this.detect()),et(this,"currentId",0)}set(r){this.current!==r&&(this.currentId=0,this.current=r)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Re=new Zt;function Qt(e){if(Re.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let r=z(e);if(r)return r.ownerDocument}return document}let tt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Gt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Gt||{}),Jt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Jt||{}),Xt=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Xt||{}),Fe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Fe||{});function dt(e,r=0){var o;return e===((o=Qt(e))==null?void 0:o.body)?!1:ae(r,{0(){return e.matches(tt)},1(){let l=e;for(;l!==null;){if(l.matches(tt))return!0;l=l.parentElement}return!1}})}var Yt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Yt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ea(e,r=o=>o){return e.slice().sort((o,l)=>{let u=r(o),d=r(l);if(u===null||d===null)return 0;let s=u.compareDocumentPosition(d);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ta(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function aa(){return/Android/gi.test(window.navigator.userAgent)}function oa(){return ta()||aa()}function _e(e,r,o){Re.isServer||Se(l=>{document.addEventListener(e,r,o),l(()=>document.removeEventListener(e,r,o))})}function ra(e,r,o){Re.isServer||Se(l=>{window.addEventListener(e,r,o),l(()=>window.removeEventListener(e,r,o))})}function sa(e,r,o=A(()=>!0)){function l(d,s){if(!o.value||d.defaultPrevented)return;let O=s(d);if(O===null||!O.getRootNode().contains(O))return;let M=(function _(E){return typeof E=="function"?_(E()):Array.isArray(E)||E instanceof Set?E:[E]})(e);for(let _ of M){if(_===null)continue;let E=_ instanceof HTMLElement?_:z(_);if(E!=null&&E.contains(O)||d.composed&&d.composedPath().includes(E))return}return!dt(O,Fe.Loose)&&O.tabIndex!==-1&&d.preventDefault(),r(d,O)}let u=L(null);_e("pointerdown",d=>{var s,O;o.value&&(u.value=((O=(s=d.composedPath)==null?void 0:s.call(d))==null?void 0:O[0])||d.target)},!0),_e("mousedown",d=>{var s,O;o.value&&(u.value=((O=(s=d.composedPath)==null?void 0:s.call(d))==null?void 0:O[0])||d.target)},!0),_e("click",d=>{oa()||u.value&&(l(d,()=>u.value),u.value=null)},!0),_e("touchend",d=>l(d,()=>d.target instanceof HTMLElement?d.target:null),!0),ra("blur",d=>l(d,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function at(e,r){if(e)return e;let o=r??"button";if(typeof o=="string"&&o.toLowerCase()==="button")return"button"}function na(e,r){let o=L(at(e.value.type,e.value.as));return pe(()=>{o.value=at(e.value.type,e.value.as)}),Se(()=>{var l;o.value||z(r)&&z(r)instanceof HTMLButtonElement&&!((l=z(r))!=null&&l.hasAttribute("type"))&&(o.value="button")}),o}function ot(e){return[e.screenX,e.screenY]}function la(){let e=L([-1,-1]);return{wasMoved(r){let o=ot(r);return e.value[0]===o[0]&&e.value[1]===o[1]?!1:(e.value=o,!0)},update(r){e.value=ot(r)}}}var Ae=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ae||{}),ia=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ia||{});function be({visible:e=!0,features:r=0,ourProps:o,theirProps:l,...u}){var d;let s=ut(l,o),O=Object.assign(u,{props:s});if(e||r&2&&s.static)return Pe(O);if(r&1){let M=(d=s.unmount)==null||d?0:1;return ae(M,{0(){return null},1(){return Pe({...u,props:{...s,hidden:!0,style:{display:"none"}}})}})}return Pe(O)}function Pe({props:e,attrs:r,slots:o,slot:l,name:u}){var d,s;let{as:O,...M}=mt(e,["unmount","static"]),_=(d=o.default)==null?void 0:d.call(o,l),E={};if(l){let h=!1,b=[];for(let[w,p]of Object.entries(l))typeof p=="boolean"&&(h=!0),p===!0&&b.push(w);h&&(E["data-headlessui-state"]=b.join(" "))}if(O==="template"){if(_=ct(_??[]),Object.keys(M).length>0||Object.keys(r).length>0){let[h,...b]=_??[];if(!ca(h)||b.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${u} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(M).concat(Object.keys(r)).map(i=>i.trim()).filter((i,f,c)=>c.indexOf(i)===f).sort((i,f)=>i.localeCompare(f)).map(i=>`  - ${i}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(i=>`  - ${i}`).join(`
`)].join(`
`));let w=ut((s=h.props)!=null?s:{},M,E),p=Tt(h,w,!0);for(let i in w)i.startsWith("on")&&(p.props||(p.props={}),p.props[i]=w[i]);return p}return Array.isArray(_)&&_.length===1?_[0]:_}return Me(O,Object.assign({},M,E),{default:()=>_})}function ct(e){return e.flatMap(r=>r.type===ee?ct(r.children):[r])}function ut(...e){if(e.length===0)return{};if(e.length===1)return e[0];let r={},o={};for(let l of e)for(let u in l)u.startsWith("on")&&typeof l[u]=="function"?(o[u]!=null||(o[u]=[]),o[u].push(l[u])):r[u]=l[u];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(o).map(l=>[l,void 0])));for(let l in o)Object.assign(r,{[l](u,...d){let s=o[l];for(let O of s){if(u instanceof Event&&u.defaultPrevented)return;O(u,...d)}}});return r}function da(e){let r=Object.assign({},e);for(let o in r)r[o]===void 0&&delete r[o];return r}function mt(e,r=[]){let o=Object.assign({},e);for(let l of r)l in o&&delete o[l];return o}function ca(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var ft=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ft||{});let ua=he({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:r,attrs:o}){return()=>{var l;let{features:u,...d}=e,s={"aria-hidden":(u&2)===2?!0:(l=d["aria-hidden"])!=null?l:void 0,hidden:(u&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(u&4)===4&&(u&2)!==2&&{display:"none"}}};return be({ourProps:s,theirProps:d,slot:{},attrs:o,slots:r,name:"Hidden"})}}}),pt=Symbol("Context");var ve=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ve||{});function ma(){return Le(pt,null)}function fa(e){nt(pt,e)}var q=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(q||{});function pa(e){throw new Error("Unexpected object: "+e)}var W=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(W||{});function va(e,r){let o=r.resolveItems();if(o.length<=0)return null;let l=r.resolveActiveIndex(),u=l??-1;switch(e.focus){case 0:{for(let d=0;d<o.length;++d)if(!r.resolveDisabled(o[d],d,o))return d;return l}case 1:{u===-1&&(u=o.length);for(let d=u-1;d>=0;--d)if(!r.resolveDisabled(o[d],d,o))return d;return l}case 2:{for(let d=u+1;d<o.length;++d)if(!r.resolveDisabled(o[d],d,o))return d;return l}case 3:{for(let d=o.length-1;d>=0;--d)if(!r.resolveDisabled(o[d],d,o))return d;return l}case 4:{for(let d=0;d<o.length;++d)if(r.resolveId(o[d],d,o)===e.id)return d;return l}case 5:return null;default:pa(e)}}function vt(e={},r=null,o=[]){for(let[l,u]of Object.entries(e))bt(o,ht(r,l),u);return o}function ht(e,r){return e?e+"["+r+"]":r}function bt(e,r,o){if(Array.isArray(o))for(let[l,u]of o.entries())bt(e,ht(r,l.toString()),u);else o instanceof Date?e.push([r,o.toISOString()]):typeof o=="boolean"?e.push([r,o?"1":"0"]):typeof o=="string"?e.push([r,o]):typeof o=="number"?e.push([r,`${o}`]):o==null?e.push([r,""]):vt(o,r,e)}let rt=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function st(e){var r,o;let l=(r=e.innerText)!=null?r:"",u=e.cloneNode(!0);if(!(u instanceof HTMLElement))return l;let d=!1;for(let O of u.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))O.remove(),d=!0;let s=d?(o=u.innerText)!=null?o:"":l;return rt.test(s)&&(s=s.replace(rt,"")),s}function ha(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let o=e.getAttribute("aria-labelledby");if(o){let l=o.split(" ").map(u=>{let d=document.getElementById(u);if(d){let s=d.getAttribute("aria-label");return typeof s=="string"?s.trim():st(d).trim()}return null}).filter(Boolean);if(l.length>0)return l.join(", ")}return st(e).trim()}function ba(e){let r=L(""),o=L("");return()=>{let l=z(e);if(!l)return"";let u=l.innerText;if(r.value===u)return o.value;let d=ha(l).trim().toLowerCase();return r.value=u,o.value=d,d}}function ga(e,r){return e===r}var xa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(xa||{}),ya=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(ya||{}),wa=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(wa||{});function _a(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let gt=Symbol("ListboxContext");function De(e){let r=Le(gt,null);if(r===null){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,De),o}return r}let Ea=he({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ga},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:r,attrs:o,emit:l}){let u=L(1),d=L(null),s=L(null),O=L(null),M=L([]),_=L(""),E=L(null),h=L(1);function b(m=v=>v){let v=E.value!==null?M.value[E.value]:null,y=ea(m(M.value.slice()),R=>z(R.dataRef.domRef)),k=v?y.indexOf(v):null;return k===-1&&(k=null),{options:y,activeOptionIndex:k}}let w=A(()=>e.multiple?1:0),[p,i]=zt(A(()=>e.modelValue),m=>l("update:modelValue",m),A(()=>e.defaultValue)),f=A(()=>p.value===void 0?ae(w.value,{1:[],0:void 0}):p.value),c={listboxState:u,value:f,mode:w,compare(m,v){if(typeof e.by=="string"){let y=e.by;return m?.[y]===v?.[y]}return e.by(m,v)},orientation:A(()=>e.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:s,optionsRef:O,disabled:A(()=>e.disabled),options:M,searchQuery:_,activeOptionIndex:E,activationTrigger:h,closeListbox(){e.disabled||u.value!==1&&(u.value=1,E.value=null)},openListbox(){e.disabled||u.value!==0&&(u.value=0)},goToOption(m,v,y){if(e.disabled||u.value===1)return;let k=b(),R=va(m===W.Specific?{focus:W.Specific,id:v}:{focus:m},{resolveItems:()=>k.options,resolveActiveIndex:()=>k.activeOptionIndex,resolveId:F=>F.id,resolveDisabled:F=>F.dataRef.disabled});_.value="",E.value=R,h.value=y??1,M.value=k.options},search(m){if(e.disabled||u.value===1)return;let v=_.value!==""?0:1;_.value+=m.toLowerCase();let y=(E.value!==null?M.value.slice(E.value+v).concat(M.value.slice(0,E.value+v)):M.value).find(R=>R.dataRef.textValue.startsWith(_.value)&&!R.dataRef.disabled),k=y?M.value.indexOf(y):-1;k===-1||k===E.value||(E.value=k,h.value=1)},clearSearch(){e.disabled||u.value!==1&&_.value!==""&&(_.value="")},registerOption(m,v){let y=b(k=>[...k,{id:m,dataRef:v}]);M.value=y.options,E.value=y.activeOptionIndex},unregisterOption(m){let v=b(y=>{let k=y.findIndex(R=>R.id===m);return k!==-1&&y.splice(k,1),y});M.value=v.options,E.value=v.activeOptionIndex,h.value=1},theirOnChange(m){e.disabled||i(m)},select(m){e.disabled||i(ae(w.value,{0:()=>m,1:()=>{let v=te(c.value.value).slice(),y=te(m),k=v.findIndex(R=>c.compare(y,te(R)));return k===-1?v.push(y):v.splice(k,1),v}}))}};sa([s,O],(m,v)=>{var y;c.closeListbox(),dt(v,Fe.Loose)||(m.preventDefault(),(y=z(s))==null||y.focus())},A(()=>u.value===0)),nt(gt,c),fa(A(()=>ae(u.value,{0:ve.Open,1:ve.Closed})));let x=A(()=>{var m;return(m=z(s))==null?void 0:m.closest("form")});return pe(()=>{je([x],()=>{if(!x.value||e.defaultValue===void 0)return;function m(){c.theirOnChange(e.defaultValue)}return x.value.addEventListener("reset",m),()=>{var v;(v=x.value)==null||v.removeEventListener("reset",m)}},{immediate:!0})}),()=>{let{name:m,modelValue:v,disabled:y,form:k,...R}=e,F={open:u.value===0,disabled:y,value:f.value};return Me(ee,[...m!=null&&f.value!=null?vt({[m]:f.value}).map(([N,H])=>Me(ua,da({features:ft.Hidden,key:N,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:k,disabled:y,name:N,value:H}))):[],be({ourProps:{},theirProps:{...o,...mt(R,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:F,slots:r,attrs:o,name:"Listbox"})])}}}),Sa=he({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:r,slots:o,expose:l}){var u;let d=(u=e.id)!=null?u:`headlessui-listbox-button-${He()}`,s=De("ListboxButton");l({el:s.buttonRef,$el:s.buttonRef});function O(h){switch(h.key){case q.Space:case q.Enter:case q.ArrowDown:h.preventDefault(),s.openListbox(),ne(()=>{var b;(b=z(s.optionsRef))==null||b.focus({preventScroll:!0}),s.value.value||s.goToOption(W.First)});break;case q.ArrowUp:h.preventDefault(),s.openListbox(),ne(()=>{var b;(b=z(s.optionsRef))==null||b.focus({preventScroll:!0}),s.value.value||s.goToOption(W.Last)});break}}function M(h){h.key===q.Space&&h.preventDefault()}function _(h){s.disabled.value||(s.listboxState.value===0?(s.closeListbox(),ne(()=>{var b;return(b=z(s.buttonRef))==null?void 0:b.focus({preventScroll:!0})})):(h.preventDefault(),s.openListbox(),_a(()=>{var b;return(b=z(s.optionsRef))==null?void 0:b.focus({preventScroll:!0})})))}let E=na(A(()=>({as:e.as,type:r.type})),s.buttonRef);return()=>{var h,b;let w={open:s.listboxState.value===0,disabled:s.disabled.value,value:s.value.value},{...p}=e,i={ref:s.buttonRef,id:d,type:E.value,"aria-haspopup":"listbox","aria-controls":(h=z(s.optionsRef))==null?void 0:h.id,"aria-expanded":s.listboxState.value===0,"aria-labelledby":s.labelRef.value?[(b=z(s.labelRef))==null?void 0:b.id,d].join(" "):void 0,disabled:s.disabled.value===!0?!0:void 0,onKeydown:O,onKeyup:M,onClick:_};return be({ourProps:i,theirProps:p,slot:w,attrs:r,slots:o,name:"ListboxButton"})}}}),Da=he({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:r,slots:o,expose:l}){var u;let d=(u=e.id)!=null?u:`headlessui-listbox-options-${He()}`,s=De("ListboxOptions"),O=L(null);l({el:s.optionsRef,$el:s.optionsRef});function M(h){switch(O.value&&clearTimeout(O.value),h.key){case q.Space:if(s.searchQuery.value!=="")return h.preventDefault(),h.stopPropagation(),s.search(h.key);case q.Enter:if(h.preventDefault(),h.stopPropagation(),s.activeOptionIndex.value!==null){let b=s.options.value[s.activeOptionIndex.value];s.select(b.dataRef.value)}s.mode.value===0&&(s.closeListbox(),ne(()=>{var b;return(b=z(s.buttonRef))==null?void 0:b.focus({preventScroll:!0})}));break;case ae(s.orientation.value,{vertical:q.ArrowDown,horizontal:q.ArrowRight}):return h.preventDefault(),h.stopPropagation(),s.goToOption(W.Next);case ae(s.orientation.value,{vertical:q.ArrowUp,horizontal:q.ArrowLeft}):return h.preventDefault(),h.stopPropagation(),s.goToOption(W.Previous);case q.Home:case q.PageUp:return h.preventDefault(),h.stopPropagation(),s.goToOption(W.First);case q.End:case q.PageDown:return h.preventDefault(),h.stopPropagation(),s.goToOption(W.Last);case q.Escape:h.preventDefault(),h.stopPropagation(),s.closeListbox(),ne(()=>{var b;return(b=z(s.buttonRef))==null?void 0:b.focus({preventScroll:!0})});break;case q.Tab:h.preventDefault(),h.stopPropagation();break;default:h.key.length===1&&(s.search(h.key),O.value=setTimeout(()=>s.clearSearch(),350));break}}let _=ma(),E=A(()=>_!==null?(_.value&ve.Open)===ve.Open:s.listboxState.value===0);return()=>{var h,b;let w={open:s.listboxState.value===0},{...p}=e,i={"aria-activedescendant":s.activeOptionIndex.value===null||(h=s.options.value[s.activeOptionIndex.value])==null?void 0:h.id,"aria-multiselectable":s.mode.value===1?!0:void 0,"aria-labelledby":(b=z(s.buttonRef))==null?void 0:b.id,"aria-orientation":s.orientation.value,id:d,onKeydown:M,role:"listbox",tabIndex:0,ref:s.optionsRef};return be({ourProps:i,theirProps:p,slot:w,attrs:r,slots:o,features:Ae.RenderStrategy|Ae.Static,visible:E.value,name:"ListboxOptions"})}}}),ka=he({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:r,attrs:o,expose:l}){var u;let d=(u=e.id)!=null?u:`headlessui-listbox-option-${He()}`,s=De("ListboxOption"),O=L(null);l({el:O,$el:O});let M=A(()=>s.activeOptionIndex.value!==null?s.options.value[s.activeOptionIndex.value].id===d:!1),_=A(()=>ae(s.mode.value,{0:()=>s.compare(te(s.value.value),te(e.value)),1:()=>te(s.value.value).some(m=>s.compare(te(m),te(e.value)))})),E=A(()=>ae(s.mode.value,{1:()=>{var m;let v=te(s.value.value);return((m=s.options.value.find(y=>v.some(k=>s.compare(te(k),te(y.dataRef.value)))))==null?void 0:m.id)===d},0:()=>_.value})),h=ba(O),b=A(()=>({disabled:e.disabled,value:e.value,get textValue(){return h()},domRef:O}));pe(()=>s.registerOption(d,b)),lt(()=>s.unregisterOption(d)),pe(()=>{je([s.listboxState,_],()=>{s.listboxState.value===0&&_.value&&ae(s.mode.value,{1:()=>{E.value&&s.goToOption(W.Specific,d)},0:()=>{s.goToOption(W.Specific,d)}})},{immediate:!0})}),Se(()=>{s.listboxState.value===0&&M.value&&s.activationTrigger.value!==0&&ne(()=>{var m,v;return(v=(m=z(O))==null?void 0:m.scrollIntoView)==null?void 0:v.call(m,{block:"nearest"})})});function w(m){if(e.disabled)return m.preventDefault();s.select(e.value),s.mode.value===0&&(s.closeListbox(),ne(()=>{var v;return(v=z(s.buttonRef))==null?void 0:v.focus({preventScroll:!0})}))}function p(){if(e.disabled)return s.goToOption(W.Nothing);s.goToOption(W.Specific,d)}let i=la();function f(m){i.update(m)}function c(m){i.wasMoved(m)&&(e.disabled||M.value||s.goToOption(W.Specific,d,0))}function x(m){i.wasMoved(m)&&(e.disabled||M.value&&s.goToOption(W.Nothing))}return()=>{let{disabled:m}=e,v={active:M.value,selected:_.value,disabled:m},{value:y,disabled:k,...R}=e,F={id:d,ref:O,role:"option",tabIndex:m===!0?void 0:-1,"aria-disabled":m===!0?!0:void 0,"aria-selected":_.value,disabled:void 0,onClick:w,onFocus:p,onPointerenter:f,onMouseenter:f,onPointermove:c,onMousemove:c,onPointerleave:x,onMouseleave:x};return be({ourProps:F,theirProps:R,slot:v,attrs:o,slots:r,name:"ListboxOption"})}}});const $a=()=>{const e=Ee(),r=Ee(),o=L(!1),l=L(null),u=async(p,i)=>{o.value=!0,l.value=null;try{J.info(`üîÑ Registrando ${i} para colaborador ${p}`);const{data:f,error:c}=await e.from("colaboradores").select("*").eq("id",p).single();if(c||!f)throw new Error("Colaborador n√£o encontrado");const x=new Date().toISOString(),m=new Date().toISOString().split("T")[0],v=i==="entrada"?["ent1","ent2","ent3","ent4","ent5"]:["sai1","sai2","sai3","sai4","sai5"];let y=null;for(const H of v)if(!f[H]){y=H;break}if(!y)throw new Error(`Limite de ${i}s atingido (m√°ximo 5 por dia). Crie um novo registro para amanh√£.`);console.log(`‚úÖ Slot dispon√≠vel encontrado: ${y}`);const k={[y]:x},{error:R}=await e.from("colaboradores").update(k).eq("id",p);if(R)throw new Error(`Erro ao atualizar colaborador: ${R.message}`);console.log("‚úÖ Tabela colaboradores atualizada");const{data:F,error:N}=await r.from("colaboradores_historico").select("*").eq("colaborador_id",p).eq("data_registro",m).eq("origem","principal").maybeSingle();if(N&&N.code!=="PGRST116"&&console.error("Erro ao buscar hist√≥rico:",N),F){console.log("üìù Atualizando hist√≥rico existente");const{error:H}=await r.from("colaboradores_historico").update({[y]:x,updated_at:x}).eq("id",F.id);H&&console.error("Erro ao atualizar hist√≥rico:",H)}else{console.log("‚ûï Criando novo registro no hist√≥rico");const{error:H}=await r.from("colaboradores_historico").insert({colaborador_id:p,data_registro:m,origem:"principal",nome:f.nome,funcao:f.funcao,filial:f.filial,matricula:f.matricula?.toString()||null,[y]:x});H&&console.error("Erro ao inserir hist√≥rico:",H)}return console.log(`‚úÖ ${i} registrada com sucesso!`),{success:!0}}catch(f){const c=f.message||`Erro ao registrar ${i}`;return l.value=c,console.error(`‚ùå Erro ao registrar ${i}:`,f),{success:!1,error:c}}finally{o.value=!1}},d=async p=>{o.value=!0,l.value=null;try{console.log(`üîç Buscando movimenta√ß√µes do dia: ${p}`),console.log("üóÑÔ∏è Buscando do hist√≥rico (tabela colaboradores_historico)");const{data:i,error:f}=await r.from("colaboradores_historico").select("*").eq("data_registro",p).eq("origem","principal").order("nome",{ascending:!0});if(f){if(console.error("‚ùå Erro ao buscar hist√≥rico:",f),f.code==="42P01"||f.message?.includes("does not exist"))return console.warn("‚ö†Ô∏è Tabela colaboradores_historico n√£o existe. Execute o SQL em database/create_historico_table.sql"),[];throw f}console.log(`üìã Encontrados ${i?.length||0} registros no hist√≥rico`);const c=s(i||[]);return console.log(`‚úÖ Processadas ${c.length} movimenta√ß√µes individuais`),c}catch(i){return l.value=i.message||"Erro ao buscar movimenta√ß√µes",console.error("‚ùå Erro ao buscar movimenta√ß√µes:",i),[]}finally{o.value=!1}},s=p=>{const i=[];return p.forEach(f=>{const c=f.colaborador_id||f.id,x=f.nome||"Sem nome",m=f.funcao,v=f.filial,y=f.matricula;for(let k=1;k<=5;k++){const R=`ent${k}`,F=f[R];F&&i.push({id:i.length+1,colaborador_id:c,nome:x,funcao:m,filial:v,matricula:y,tipo:"entrada",hora:F,data:F.split("T")[0]})}for(let k=1;k<=5;k++){const R=`sai${k}`,F=f[R];F&&i.push({id:i.length+1,colaborador_id:c,nome:x,funcao:m,filial:v,matricula:y,tipo:"saida",hora:F,data:F.split("T")[0]})}}),i.sort((f,c)=>new Date(c.hora).getTime()-new Date(f.hora).getTime())};return{loading:o,error:l,registrarMovimentacao:u,buscarMovimentacoesDia:d,buscarResumoColaboradoresDia:async p=>{o.value=!0,l.value=null;try{console.log(`üìä Buscando resumo do dia: ${p}`),console.log("üóÑÔ∏è Buscando da tabela colaboradores_historico...");const{data:i,error:f}=await r.from("colaboradores_historico").select("*").eq("data_registro",p).eq("origem","principal").order("nome",{ascending:!0});if(f)throw console.error("‚ùå Erro ao buscar hist√≥rico:",f),f;const c=i||[];console.log(`üìã Encontrados ${c.length} registros no hist√≥rico do dia ${p}`);const x=c.map(async v=>{const y=v.colaborador_id||v.id,{data:k,error:R}=await r.from("colaboradores_historico").select("*").eq("colaborador_id",y).eq("origem","principal").order("data_registro",{ascending:!0});R&&console.error("‚ùå Erro ao buscar hist√≥rico completo:",R);let F=0,N=0;(k||[]).forEach(Q=>{for(let V=1;V<=5;V++)Q[`ent${V}`]&&F++,Q[`sai${V}`]&&N++});const H=[],K=[];for(let Q=1;Q<=5;Q++){const V=`ent${Q}`,oe=`sai${Q}`;v[V]&&H.push(v[V]),v[oe]&&K.push(v[oe])}const X=F>N,U={colaborador_id:y,nome:v.nome||"Sem nome",funcao:v.funcao,filial:v.filial,matricula:v.matricula,entradas:H,saidas:K,presente:X};return console.log(`üìù Resumo de ${U.nome}:`,{entradasDia:H.length,saidasDia:K.length,totalEntradasHistorico:F,totalSaidasHistorico:N,presente:X}),U}),m=await Promise.all(x);return console.log(`‚úÖ Resumo processado: ${m.length} colaboradores`),console.log(`‚úÖ Funcion√°rios presentes: ${m.filter(v=>v.presente).length}`),m}catch(i){return l.value=i.message||"Erro ao buscar resumo",console.error("‚ùå Erro ao buscar resumo:",i),[]}finally{o.value=!1}},buscarTodosColaboradoresPresentes:async(p="principal")=>{o.value=!0,l.value=null;try{console.log(`üìä Buscando TODOS os colaboradores presentes (origem: ${p})...`);const{data:i,error:f}=await r.from("colaboradores_historico").select("colaborador_id, nome, funcao, filial, matricula").eq("origem",p).order("nome",{ascending:!0});if(f)throw console.error("‚ùå Erro ao buscar hist√≥rico:",f),f;const c=new Map;(i||[]).forEach(y=>{const k=y.colaborador_id;c.has(k)||c.set(k,y)}),console.log(`üìã Encontrados ${c.size} colaboradores √∫nicos`);const x=Array.from(c.values()).map(async y=>{const k=y.colaborador_id,{data:R,error:F}=await r.from("colaboradores_historico").select("*").eq("colaborador_id",k).eq("origem",p).order("data_registro",{ascending:!1});F&&console.error("‚ùå Erro ao buscar hist√≥rico completo:",F);let N=null,H=null,K=!1;for(const U of R||[]){let Q=0,V=0;const oe=[],ie=[];for(let re=1;re<=5;re++)U[`ent${re}`]&&(Q++,oe.push(U[`ent${re}`])),U[`sai${re}`]&&(V++,ie.push(U[`sai${re}`]));if(Q>V){K=!0,!H&&oe.length>0&&(oe.sort(),H=oe[0],N=U.data_registro);break}}const X={colaborador_id:k,nome:y.nome||"Sem nome",funcao:y.funcao,filial:y.filial,matricula:y.matricula,entradas:[],saidas:[],presente:K,data_entrada:N,hora_entrada:H};return console.log(`üìù ${X.nome}:`,{presente:K,dataEntrada:N,horaEntrada:H}),X}),m=await Promise.all(x),v=m.filter(y=>y.presente);return console.log(`‚úÖ Total colaboradores: ${m.length}`),console.log(`‚úÖ Funcion√°rios presentes: ${v.length}`),console.log("‚úÖ Presentes detalhado:",v.map(y=>({nome:y.nome,data_entrada:y.data_entrada,presente:y.presente}))),v}catch(i){return l.value=i.message||"Erro ao buscar colaboradores presentes",console.error("‚ùå Erro ao buscar colaboradores presentes:",i),[]}finally{o.value=!1}},limparRegistrosDiaAtual:async()=>{o.value=!0,l.value=null;try{console.log("üßπ Limpando registros do dia atual...");const{error:p}=await e.from("colaboradores").update({ent1:null,sai1:null,ent2:null,sai2:null,ent3:null,sai3:null,ent4:null,sai4:null,ent5:null,sai5:null}).neq("id",0);if(p)throw p;return console.log("‚úÖ Registros limpos com sucesso"),{success:!0}}catch(p){return l.value=p.message||"Erro ao limpar registros",console.error("‚ùå Erro ao limpar registros:",p),{success:!1,error:l.value||void 0}}finally{o.value=!1}},buscarHistoricoPorData:async p=>({historicos:await d(p),error:l.value}),buscarHistoricosPorData:async p=>{try{const i=new Date().toISOString().split("T")[0];if(p===i){const{data:c,error:x}=await e.from("colaboradores").select("*").order("nome",{ascending:!0});return x?{historicos:[],error:x.message}:{historicos:c||[],error:null}}else{const{data:c,error:x}=await r.from("colaboradores_historico").select("*").eq("data_registro",p).order("nome",{ascending:!0});return x?x.code==="42P01"||x.message?.includes("does not exist")?(console.warn("‚ö†Ô∏è Tabela colaboradores_historico n√£o existe"),{historicos:[],error:null}):{historicos:[],error:x.message}:{historicos:c||[],error:null}}}catch(i){return{historicos:[],error:i.message||"Erro desconhecido"}}},mesclarColaboradoresComHistorico:(p,i)=>{if(!i||i.length===0)return p;const f=new Map;return i.forEach(c=>{const x=c.colaborador_id||c.id;f.set(x,c)}),p.map(c=>{const x=f.get(c.id);return x?{...c,...x,id:c.id}:c})},salvarHistorico:async(p,i,f)=>{try{J.info(`üíæ Salvando hist√≥rico - Colaborador: ${p}, Data: ${i}`),J.debug("üìù Dados a salvar:",f);const c=Ee(),{data:x,error:m}=await c.from("colaboradores_historico").select("*").eq("colaborador_id",p).eq("data_registro",i).maybeSingle();if(m&&m.code!=="PGRST116")return J.error("‚ùå Erro ao buscar registro:",m),Bt(m)?{success:!1,error:"Tabela colaboradores_historico n√£o existe. Execute o script de cria√ß√£o da tabela."}:{success:!1,error:m.message};if(x){J.info("üìù Atualizando hist√≥rico existente ID:",x.id);const{error:v}=await c.from("colaboradores_historico").update({...f,updated_at:new Date().toISOString()}).eq("id",x.id);return v?(J.error("‚ùå Erro ao atualizar hist√≥rico:",v),{success:!1,error:v.message}):(J.success("Hist√≥rico atualizado com sucesso"),{success:!0})}else{J.info("‚ûï Criando novo hist√≥rico");const{error:v}=await c.from("colaboradores_historico").insert({colaborador_id:p,data_registro:i,...f});return v?(J.error("‚ùå Erro ao criar hist√≥rico:",v),{success:!1,error:v.message}):(J.success("Hist√≥rico criado com sucesso"),{success:!0})}}catch(c){return J.error("‚ùå Erro ao salvar hist√≥rico:",c),{success:!1,error:c.message}}}}};class Ca{cache=new Map;defaultTTL=300*1e3;set(r,o,l){this.cache.set(r,{data:o,timestamp:Date.now(),ttl:l||this.defaultTTL})}get(r){const o=this.cache.get(r);return o?Date.now()-o.timestamp>o.ttl?(this.cache.delete(r),null):(console.log(`‚úÖ Cache HIT: ${r}`),o.data):null}has(r){return this.get(r)!==null}delete(r){this.cache.delete(r)}clear(){this.cache.clear(),console.log("üóëÔ∏è Cache limpo")}cleanup(){const r=Date.now();let o=0;for(const[l,u]of this.cache.entries())r-u.timestamp>u.ttl&&(this.cache.delete(l),o++);o>0&&console.log(`üóëÔ∏è Cache cleanup: ${o} itens removidos`)}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys()),defaultTTL:this.defaultTTL}}}const xt=new Ca;typeof window<"u"&&it(()=>{xt.cleanup()},600*1e3);const Oa=()=>xt,Ta=()=>{const e=Ee(),r=Oa(),o=L(!1),l=L(null);return{loading:o,error:l,getPeriodStats:async(_="today")=>{const E=`period-stats-${_}`,h=r.get(E);if(h)return h;o.value=!0,l.value=null;try{const b=new Date;let w;switch(_){case"today":w=new Date(b.setHours(0,0,0,0));break;case"week":w=new Date(b.setDate(b.getDate()-7));break;case"month":w=new Date(b.setDate(b.getDate()-30));break}const{data:p,error:i}=await e.from("colaboradores").select("ent1, sai1, ent2, sai2, ent3, sai3, ent4, sai4, ent5, sai5").gte("created_at",w.toISOString());if(i)throw i;let f=0,c=0;p?.forEach(m=>{m.ent1&&f++,m.ent2&&f++,m.ent3&&f++,m.ent4&&f++,m.ent5&&f++,m.sai1&&c++,m.sai2&&c++,m.sai3&&c++,m.sai4&&c++,m.sai5&&c++});const x={totalEntradas:f,totalSaidas:c,diferenca:f-c};return r.set(E,x,300*1e3),x}catch(b){return console.error("Erro ao buscar estat√≠sticas:",b),l.value="Erro ao carregar estat√≠sticas",{totalEntradas:0,totalSaidas:0,diferenca:0}}finally{o.value=!1}},getHourlyStats:async()=>{const E=`hourly-stats-${new Date().toISOString().split("T")[0]}`,h=r.get(E);if(h)return h;o.value=!0,l.value=null;try{const b=new Date().toISOString().split("T")[0],{data:w,error:p}=await e.from("colaboradores").select("ent1, sai1, ent2, sai2, ent3, sai3, ent4, sai4, ent5, sai5").gte("created_at",`${b}T00:00:00`).lte("created_at",`${b}T23:59:59`);if(p)throw p;const i=Array.from({length:15},(x,m)=>m+6),f={};i.forEach(x=>{f[x]={entradas:0,saidas:0}}),w?.forEach(x=>{[x.ent1,x.ent2,x.ent3,x.ent4,x.ent5].forEach(m=>{if(m){const v=new Date(m).getHours();f[v]&&f[v].entradas++}}),[x.sai1,x.sai2,x.sai3,x.sai4,x.sai5].forEach(m=>{if(m){const v=new Date(m).getHours();f[v]&&f[v].saidas++}})});const c=i.map(x=>({hour:`${x.toString().padStart(2,"0")}h`,entradas:f[x]?.entradas||0,saidas:f[x]?.saidas||0}));return r.set(E,c,120*1e3),c}catch(b){return console.error("Erro ao buscar estat√≠sticas hor√°rias:",b),l.value="Erro ao carregar gr√°fico",[]}finally{o.value=!1}},getWeeklyStats:async()=>{o.value=!0,l.value=null;try{const _=new Date,E=new Date(_.setDate(_.getDate()-7)),{data:h,error:b}=await e.from("colaboradores").select("created_at, ent1, sai1, ent2, sai2, ent3, sai3, ent4, sai4, ent5, sai5").gte("created_at",E.toISOString()).order("created_at",{ascending:!0});if(b)throw b;const w=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"],p=new Map;return h?.forEach(i=>{const f=i.created_at?.split("T")[0]||"";p.has(f)||p.set(f,{entradas:0,saidas:0});const c=p.get(f);i.ent1&&c.entradas++,i.ent2&&c.entradas++,i.ent3&&c.entradas++,i.ent4&&c.entradas++,i.ent5&&c.entradas++,i.sai1&&c.saidas++,i.sai2&&c.saidas++,i.sai3&&c.saidas++,i.sai4&&c.saidas++,i.sai5&&c.saidas++}),Array.from(p.entries()).map(([i,f])=>{const c=new Date(i).getDay();return{date:i,day:w[c]||"N/A",entradas:f.entradas,saidas:f.saidas}})}catch(_){return console.error("Erro ao buscar estat√≠sticas semanais:",_),l.value="Erro ao carregar gr√°fico semanal",[]}finally{o.value=!1}},getMonthlyStats:async()=>{o.value=!0,l.value=null;try{const _=new Date,E=new Date(_.setDate(_.getDate()-30)),{data:h,error:b}=await e.from("colaboradores").select("created_at, ent1, sai1, ent2, sai2, ent3, sai3, ent4, sai4, ent5, sai5").gte("created_at",E.toISOString()).order("created_at",{ascending:!0});if(b)throw b;const w=new Map;return h?.forEach(p=>{const i=new Date(p.created_at||""),f=Math.ceil(i.getDate()/7);w.has(f)||w.set(f,{entradas:0,saidas:0});const c=w.get(f);p.ent1&&c.entradas++,p.ent2&&c.entradas++,p.ent3&&c.entradas++,p.ent4&&c.entradas++,p.ent5&&c.entradas++,p.sai1&&c.saidas++,p.sai2&&c.saidas++,p.sai3&&c.saidas++,p.sai4&&c.saidas++,p.sai5&&c.saidas++}),Array.from(w.entries()).map(([p,i])=>({date:`Sem ${p}`,day:`Sem ${p}`,entradas:i.entradas,saidas:i.saidas}))}catch(_){return console.error("Erro ao buscar estat√≠sticas mensais:",_),l.value="Erro ao carregar gr√°fico mensal",[]}finally{o.value=!1}},getTopColaboradores:async(_=10)=>{o.value=!0,l.value=null;try{const E=new Date,h=new Date(E.setDate(E.getDate()-30)),{data:b,error:w}=await e.from("colaboradores").select("nome, ent1, sai1, ent2, sai2, ent3, sai3, ent4, sai4, ent5, sai5").gte("created_at",h.toISOString());if(w)throw w;const p=new Map;return b?.forEach(i=>{const f=i.nome||"Sem nome";let c=0;i.ent1&&c++,i.sai1&&c++,i.ent2&&c++,i.sai2&&c++,i.ent3&&c++,i.sai3&&c++,i.ent4&&c++,i.sai4&&c++,i.ent5&&c++,i.sai5&&c++,p.set(f,(p.get(f)||0)+c)}),Array.from(p.entries()).map(([i,f])=>({nome:i,totalMovimentacoes:f})).sort((i,f)=>f.totalMovimentacoes-i.totalMovimentacoes).slice(0,_)}catch(E){return console.error("Erro ao buscar top colaboradores:",E),l.value="Erro ao carregar ranking",[]}finally{o.value=!1}}}},Pa=Lt("analytics",()=>{const e=Ta(),r=L(!0),o=L(!1),l={today:{labels:["06h","08h","10h","12h","14h","16h","18h"],datasets:[{label:"Entradas",data:[3,8,14,9,7,5,2],backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:[1,2,6,5,4,3,1],backgroundColor:"#F97316",borderColor:"#EA580C"}]},week:{labels:["Seg","Ter","Qua","Qui","Sex","S√°b","Dom"],datasets:[{label:"Entradas",data:[45,52,60,58,70,30,24],backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:[32,28,35,30,40,18,20],backgroundColor:"#F97316",borderColor:"#EA580C"}]},month:{labels:Array.from({length:12}).map((h,b)=>`Sem ${b+1}`),datasets:[{label:"Entradas",data:Array.from({length:12}).map(()=>Math.round(50+Math.random()*80)),backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:Array.from({length:12}).map(()=>Math.round(20+Math.random()*50)),backgroundColor:"#F97316",borderColor:"#EA580C"}]}},u=L(l.today),d=L("today");async function s(h="today"){o.value=!0;try{if(h==="today"){const b=await e.getHourlyStats();u.value={labels:b.map(w=>w.hour),datasets:[{label:"Entradas",data:b.map(w=>w.entradas),backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:b.map(w=>w.saidas),backgroundColor:"#F97316",borderColor:"#EA580C"}]}}else if(h==="week"){const b=await e.getWeeklyStats();u.value={labels:b.map(w=>w.day),datasets:[{label:"Entradas",data:b.map(w=>w.entradas),backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:b.map(w=>w.saidas),backgroundColor:"#F97316",borderColor:"#EA580C"}]}}else{const b=await e.getMonthlyStats();u.value={labels:b.map(w=>w.day),datasets:[{label:"Entradas",data:b.map(w=>w.entradas),backgroundColor:"#3B82F6",borderColor:"#2563EB"},{label:"Sa√≠das",data:b.map(w=>w.saidas),backgroundColor:"#F97316",borderColor:"#EA580C"}]}}}catch(b){J.warn("Erro ao carregar dados reais, usando mock:",b),u.value=O(h)}finally{o.value=!1}}function O(h="today"){return h==="today"?l.today:h==="week"?l.week:l.month}async function M(h="today"){d.value=h,r.value?await s(h):u.value=O(h)}const _=A(()=>{if(!u.value?.datasets||u.value.datasets.length<2)return[{label:"Entradas",value:0},{label:"Sa√≠das",value:0},{label:"Diferen√ßa",value:0}];const h=u.value.datasets[0]?.data?.reduce((w,p)=>w+p,0)??0,b=u.value.datasets[1]?.data?.reduce((w,p)=>w+p,0)??0;return[{label:"Entradas",value:h},{label:"Sa√≠das",value:b},{label:"Diferen√ßa",value:h-b}]});async function E(){await M(d.value)}return{current:u,loading:o,currentPeriod:d,useRealData:r,getChartData:O,updatePeriod:M,summary:_,initialize:E}}),Ma={class:"bg-white border-b border-neutral-200 mb-8"},Aa={class:"container mx-auto px-4 py-4"},La={class:"flex justify-between items-center"},ja={class:"text-secondary-600"},Ha={class:"container mx-auto px-4 py-6"},Ra={class:"grid md:grid-cols-2 gap-6"},Fa={class:"bg-white rounded-xl shadow-md p-6 border border-neutral-100"},Ia={class:"text-xl font-semibold text-success-600 mb-4 flex items-center"},Na={class:"bg-white rounded-xl shadow-md p-6 border border-neutral-100"},Ba={class:"text-xl font-semibold text-danger-600 mb-4 flex items-center"},Va={class:"relative"},za={key:0,class:"block truncate text-neutral-400 font-medium"},qa={key:1,class:"block truncate font-medium text-secondary-800"},Ua={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Wa={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-4 text-danger-600"},Ka={class:"mt-10 grid md:grid-cols-2 gap-6"},Za={key:0,class:"grid grid-cols-2 gap-4"},Qa={class:"mt-10 bg-white rounded-2xl shadow-medium p-8 border border-neutral-100"},Ga={class:"flex justify-between items-center mb-6"},Ja={class:"text-2xl font-semibold text-secondary-800 flex items-center"},Xa={class:"ml-3 inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-primary-100 text-primary-800"},Ya={class:"flex border-b border-neutral-200 mb-6"},eo={key:0,class:"text-neutral-500 text-center py-12 flex flex-col items-center"},to={key:1,class:"grid gap-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6"},ao={class:"flex items-start justify-between"},oo={class:"flex-1 min-w-0"},ro={class:"font-semibold text-secondary-800 flex items-center text-xs truncate"},so={class:"mt-1"},no={key:0,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-amber-100 text-amber-800"},lo={key:1,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-blue-100 text-blue-800"},io={key:2,class:"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 text-green-800"},co={class:"text-secondary-600 flex items-center mt-0.5 text-[11px] truncate"},uo={key:0,class:"text-neutral-500 mt-0.5 flex items-center text-[11px]"},mo={key:1,class:"text-neutral-500 mt-0.5 flex items-center text-[11px]"},fo={class:"text-neutral-500 mt-0.5 flex items-center text-[11px]"},po={key:2,class:"text-neutral-500 mt-0.5 flex items-center text-[11px]"},vo={key:2,class:"space-y-2"},ho={class:"flex-1"},bo={class:"flex items-center gap-2"},go={class:"text-sm font-medium text-secondary-800"},xo={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-800"},yo={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-blue-100 text-blue-800"},wo={key:2,class:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-green-100 text-green-800"},_o={class:"flex items-center gap-3 mt-1 text-xs text-neutral-600"},Eo={key:0},So={class:"mt-8 bg-white rounded-xl shadow-md border border-neutral-100 overflow-hidden"},Do={class:"bg-gradient-to-r from-primary-500 to-primary-600 px-6 py-4"},ko={class:"flex justify-between items-center mb-3"},$o={class:"text-lg font-bold text-white flex items-center"},Co={class:"flex items-center space-x-3"},Oo={class:"flex items-center space-x-2 bg-white/10 rounded-lg px-3 py-1.5"},To=["max"],Po={key:0,class:"bg-success-500 text-white text-[10px] px-2 py-0.5 rounded-full font-semibold"},Mo={class:"flex space-x-1.5"},Ao=["onClick"],Lo={class:"grid grid-cols-4 gap-3"},jo={class:"text-center"},Ho={class:"text-2xl font-bold text-white"},Ro={class:"text-center"},Fo={class:"text-2xl font-bold text-white"},Io={class:"text-center"},No={class:"text-2xl font-bold text-white"},Bo={class:"text-center"},Vo={class:"text-2xl font-bold text-white"},zo={class:"p-5"},qo={class:"grid grid-cols-1 gap-6"},Uo={class:"p-5"},Wo={key:0},Ko={class:"grid grid-cols-1 lg:grid-cols-3 gap-5"},Zo={class:"lg:col-span-2"},Qo={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},Go={class:"text-sm text-neutral-500 mt-1"},Jo={class:"flex flex-wrap gap-2 w-full sm:w-auto"},Xo={class:"relative flex-1 sm:flex-initial"},Yo={class:"relative flex-1 sm:flex-initial sm:min-w-[280px]"},er={key:0,class:"text-center py-16 bg-neutral-50 rounded-xl"},tr={key:1,class:"relative space-y-3"},ar={class:"relative z-10 flex-shrink-0"},or={class:"flex justify-between items-center"},rr={class:"flex items-center space-x-4 flex-1"},sr={class:"text-center"},nr={class:"text-xl font-bold text-secondary-800"},lr={class:"text-[10px] text-neutral-500 uppercase font-semibold"},ir={class:"flex-1 min-w-0"},dr={class:"flex items-center space-x-2"},cr={class:"font-bold text-secondary-900 text-sm truncate"},ur={class:"flex items-center mt-1 space-x-3 text-xs text-secondary-600"},mr={class:"flex items-center"},fr={key:0,class:"flex items-center"},pr={class:"lg:col-span-1"},vr={class:"bg-gradient-to-br from-white to-neutral-50 rounded-lg border border-neutral-200 shadow-sm overflow-hidden sticky top-4"},hr={class:"bg-gradient-to-r from-primary-600 to-primary-700 px-3 py-2"},br={class:"text-white font-semibold text-sm flex items-center"},gr={class:"text-primary-100 text-[10px] mt-0.5"},xr={class:"p-3 space-y-2"},yr={class:"flex items-center justify-between p-2 bg-success-50 rounded-md border border-success-200 hover:bg-success-100 transition-colors"},wr={class:"flex items-center space-x-2"},_r={class:"bg-success-500 p-1.5 rounded-md"},Er={class:"text-lg font-bold text-success-900"},Sr={class:"flex items-center justify-between p-2 bg-danger-50 rounded-md border border-danger-200 hover:bg-danger-100 transition-colors"},Dr={class:"flex items-center space-x-2"},kr={class:"bg-danger-500 p-1.5 rounded-md"},$r={class:"text-lg font-bold text-danger-900"},Cr={class:"flex items-center justify-between p-2 bg-primary-50 rounded-md border border-primary-200 hover:bg-primary-100 transition-colors"},Or={class:"flex items-center space-x-2"},Tr={class:"bg-primary-500 p-1.5 rounded-md"},Pr={class:"text-lg font-bold text-primary-900"},Mr={class:"space-y-1.5"},Ar={class:"flex items-center justify-between py-1.5 px-2 hover:bg-neutral-50 rounded-md transition-colors"},Lr={class:"text-[10px] text-neutral-600 flex items-center"},jr={class:"font-bold text-xs text-neutral-800"},Hr={class:"flex items-center justify-between py-1.5 px-2 hover:bg-neutral-50 rounded-md transition-colors"},Rr={class:"text-[10px] text-neutral-600 flex items-center"},Fr={class:"font-bold text-xs text-neutral-800"},Ir={class:"flex items-center justify-between py-1.5 px-2 hover:bg-neutral-50 rounded-md transition-colors"},Nr={class:"text-[10px] text-neutral-600 flex items-center"},Br={class:"font-bold text-xs text-neutral-800"},Vr={key:1},zr={class:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},qr={class:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl border border-blue-200"},Ur={class:"flex items-center"},Wr={class:"p-3 bg-blue-500 rounded-lg"},Kr={class:"ml-4"},Zr={class:"text-2xl font-bold text-blue-700"},Qr={class:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl border border-purple-200"},Gr={class:"flex items-center"},Jr={class:"p-3 bg-purple-500 rounded-lg"},Xr={class:"ml-4"},Yr={class:"text-2xl font-bold text-purple-700"},es={class:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl border border-green-200"},ts={class:"flex items-center"},as={class:"p-3 bg-green-500 rounded-lg"},os={class:"ml-4"},rs={class:"text-2xl font-bold text-green-700"},ss={class:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border border-orange-200"},ns={class:"flex items-center"},ls={class:"p-3 bg-orange-500 rounded-lg"},is={class:"ml-4"},ds={class:"text-2xl font-bold text-orange-700"},cs={class:"bg-neutral-50 rounded-xl p-6 mb-6"},us={class:"flex items-end space-x-2 h-40"},ms={class:"text-xs text-neutral-600 mt-2"},fs={class:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-6"},ps={class:"space-y-3"},vs={class:"flex items-center"},hs={class:"ml-3"},bs={class:"font-medium text-secondary-800"},gs={class:"text-sm text-secondary-600"},xs={class:"text-right"},ys={class:"font-bold text-indigo-700"},ws={key:2},_s={class:"flex justify-between items-center mb-6"},Es={class:"flex space-x-3"},Ss={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Ds={class:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-6 border border-teal-200"},ks={class:"text-teal-600 text-sm"},$s={class:"bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl p-6 border border-pink-200"},Cs={class:"text-2xl font-bold text-pink-700"},Os={class:"bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-xl p-6 border border-cyan-200"},Ts={class:"text-2xl font-bold text-cyan-700"},Ps={class:"bg-white border border-neutral-200 rounded-xl overflow-hidden"},Ms={class:"max-h-96 overflow-y-auto"},As={class:"w-full"},Ls={class:"divide-y divide-neutral-200"},js={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary-900"},Hs={class:"px-6 py-4 whitespace-nowrap text-sm text-secondary-800"},Rs={class:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600"},Fs={class:"px-6 py-4 whitespace-nowrap"},Js={__name:"index",setup(e){const{user:r,logout:o}=Ft(),{colaboradores:l,buscarColaboradores:u}=It(),{registrarMovimentacao:d,buscarMovimentacoesDia:s,buscarResumoColaboradoresDia:O,buscarTodosColaboradoresPresentes:M}=$a(),_=async()=>{await o(),await Rt("/login")};jt({title:"Sistema de Portaria - Controle de Acesso",meta:[{name:"description",content:"Sistema para controle de entrada e sa√≠da de funcion√°rios"}]});const E=Pa(),{summary:h,current:b}=Ht(E),w=A(()=>h.value??[]),p=A(()=>b.value??{labels:[],datasets:[]}),i=g=>{console.log("Atualizando gr√°fico:",g),E?.updatePeriod(g)},f=g=>{console.log("Mudando per√≠odo:",g),E?.updatePeriod(g)},c=L({nome:"",cargo:""}),x=L({funcionarioId:""}),m=L(new Date().toISOString().split("T")[0]),v=L([]),y=L([]),k=L([]),R=L([]),F=L([]),N=L("cards"),H=A(()=>v.value.sort((g,a)=>new Date(a.hora)-new Date(g.hora))),K=L(0),X=L(""),U=L(""),Q=[{nome:"üïí Timeline",icone:"timeline"},{nome:"üìä Estat√≠sticas",icone:"stats"},{nome:"üìã Relat√≥rios",icone:"reports"}],V=k,oe=A(()=>x.value.funcionarioId?k.value.find(g=>g.id===parseInt(x.value.funcionarioId)):null),ie=A(()=>{let g=H.value;if(console.log("üîç Filtrando hist√≥rico:",{total:g.length,filtroTipo:X.value,filtroNome:U.value}),X.value&&(g=g.filter(a=>a.tipo===X.value),console.log(`üìä Ap√≥s filtro tipo: ${g.length} registros`)),U.value.trim()){const a=U.value.toLowerCase().trim();g=g.filter(P=>P.nome?.toLowerCase().includes(a)||P.funcao?.toLowerCase().includes(a)||P.cargo?.toLowerCase().includes(a)||P.matricula?.toString().includes(a)),console.log(`üìä Ap√≥s filtro nome: ${g.length} registros`)}return g.sort((a,P)=>new Date(P.hora)-new Date(a.hora))}),re=A(()=>H.value.length),Ie=A(()=>H.value.filter(g=>g.tipo==="entrada").length),Ne=A(()=>H.value.filter(g=>g.tipo==="saida").length),Be=A(()=>new Set(H.value.map(a=>a.nome)).size),Ve=A(()=>{const g={};H.value.forEach(I=>{const n=new Date(I.hora).getHours();g[n]=(g[n]||0)+1});const a=Math.max(...Object.values(g),0),P=Object.keys(g).find(I=>g[I]===a);return P?`${P}:00`:"N/A"}),ze=A(()=>{if(V.value.length===0)return"0h";const g=new Date,a=V.value.map(I=>{const n=new Date(I.horaEntrada);return Math.abs(g-n)/(1e3*60*60)}),P=a.reduce((I,n)=>I+n,0)/a.length;return`${Math.round(P)}h`}),yt=A(()=>{const g=H.value.filter(I=>I.tipo==="entrada"),a=H.value.filter(I=>I.tipo==="saida");let P=0;return g.forEach(I=>{const n=a.find(j=>j.nome===I.nome);if(n){const j=Math.abs(new Date(n.hora)-new Date(I.hora))/36e5;P+=j}}),Math.round(P)}),qe=A(()=>{const g=Array.from({length:24},(a,P)=>({label:P.toString().padStart(2,"0"),count:0}));return H.value.forEach(a=>{const P=new Date(a.hora).getHours();g[P].count++}),g.filter(a=>a.count>0)}),wt=A(()=>Math.max(...qe.value.map(g=>g.count),1)),_t=A(()=>{const g={};return H.value.forEach(a=>{g[a.nome]||(g[a.nome]={nome:a.nome,cargo:a.cargo,movimentacoes:0}),g[a.nome].movimentacoes++}),Object.values(g).sort((a,P)=>P.movimentacoes-a.movimentacoes).slice(0,5)}),Et=A(()=>Ve.value),St=A(()=>{const a=Math.min(100,Math.max(0,80));return Math.round(a)}),Dt=async()=>{if(c.value.nome.trim())try{const g=c.value.nome.trim(),a=c.value.cargo.trim();let P=l.value.find(j=>j.nome?.toLowerCase()===g.toLowerCase());if(!P){console.log("Colaborador n√£o encontrado, seria necess√°rio criar primeiro"),alert("Colaborador n√£o encontrado. Por favor, cadastre primeiro.");return}if(k.value.some(j=>j.id===P.id)){alert(`‚ùå ${g} j√° est√° presente! Por favor, registre a sa√≠da antes de registrar uma nova entrada.`);return}const n=await d(P.id,"entrada");n.success?(c.value={nome:"",cargo:""},console.log(`‚úÖ Entrada registrada para ${g}`),await ce(),await ue(),await u()):(console.error(`‚ùå Erro: ${n.error}`),alert(`Erro ao registrar entrada: ${n.error}`))}catch(g){console.error("Erro ao registrar entrada:",g),alert("Erro ao registrar entrada. Tente novamente.")}},kt=async()=>{const g=parseInt(x.value.funcionarioId),a=k.value.find(P=>P.id===g);if(a)try{const P=await d(g,"saida");P.success?(x.value.funcionarioId="",console.log(`‚úÖ Sa√≠da registrada para ${a.nome}`),await ce(),await ue(),await u()):console.error(`‚ùå Erro: ${P.error}`)}catch(P){console.error("Erro ao registrar sa√≠da:",P)}},$t=g=>{const a=new Date,P=new Date(g),I=a-P,n=Math.floor(I/(1e3*60));if(n<1)return"Agora";if(n<60)return`${n}m atr√°s`;const j=Math.floor(n/60);return j<24?`${j}h atr√°s`:`${Math.floor(j/24)}d atr√°s`},ke=g=>g?(typeof g=="string"&&g.match(/^\d{4}-\d{2}-\d{2}$/)&&(g=g+"T12:00:00"),new Date(g).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})):"-",ge=g=>{if(!g)return"-";try{if(typeof g=="string"){const n=g.match(/T(\d{2}):(\d{2})/);if(n)return`${n[1]}:${n[2]}`;const j=new Date(g);if(isNaN(j.getTime()))return"-";const de=j.getHours().toString().padStart(2,"0"),Ct=j.getMinutes().toString().padStart(2,"0");return`${de}:${Ct}`}const a=new Date(g);if(isNaN(a.getTime()))return"-";const P=a.getHours().toString().padStart(2,"0"),I=a.getMinutes().toString().padStart(2,"0");return`${P}:${I}`}catch{return"-"}},ce=async()=>{try{console.log("üìÖ Carregando movimenta√ß√µes do dia:",m.value),v.value=await s(m.value),console.log("‚úÖ Movimenta√ß√µes carregadas:",v.value?.length||0),y.value=await O(m.value),console.log("‚úÖ Resumo carregado:",y.value?.length||0)}catch(g){console.error("‚ùå Erro ao carregar movimenta√ß√µes:",g),v.value=[],y.value=[]}},ue=async()=>{try{console.log("üë• Carregando colaboradores presentes (Principal + SFL + Transportadoras)...");const[g,a,P]=await Promise.all([M("principal"),M("sfl"),M("transportadoras")]);R.value=g.map(n=>{const j=n.hora_entrada||null;return{id:n.colaborador_id,nome:n.nome,cargo:n.funcao||"N√£o informado",horaEntrada:j,dataEntrada:n.data_entrada||null,matricula:n.matricula||null,filial:n.filial||null,origem:"principal"}}),F.value=a.map(n=>{const j=n.hora_entrada||null;return{id:n.colaborador_id,nome:n.nome,cargo:n.funcao||"N√£o informado",horaEntrada:j,dataEntrada:n.data_entrada||null,matricula:n.matricula||null,filial:n.filial||null,origem:"sfl"}});const I=P.map(n=>{const j=n.hora_entrada||null;return{id:n.colaborador_id,nome:n.nome,cargo:n.funcao||"N√£o informado",horaEntrada:j,dataEntrada:n.data_entrada||null,matricula:null,filial:n.filial||null,origem:"transportadoras"}});k.value=[...R.value,...F.value,...I],console.log(`‚úÖ Colaboradores presentes carregados: ${k.value.length} (Principal: ${R.value.length}, SFL: ${F.value.length}, Transportadoras: ${I.length})`)}catch(g){console.error("‚ùå Erro ao carregar colaboradores presentes:",g),k.value=[]}};return je(m,async()=>{await ce()}),pe(async()=>{try{console.log("üöÄ Iniciando carregamento de dados..."),await u(),console.log("‚úÖ Colaboradores carregados"),await ne(),await ce(),await ue(),console.log("‚úÖ Dados iniciais carregados com sucesso");const g=it(async()=>{console.log("üîÑ Auto-refresh: atualizando dados..."),await ce(),await ue()},1e4);lt(()=>{clearInterval(g)})}catch(g){console.error("‚ùå Erro ao carregar dados iniciais:",g)}}),(g,a)=>{const P=Ke("ChartCard"),I=Ke("StatCard");return D(),C("div",null,[t("div",Ma,[t("div",Aa,[t("div",La,[t("div",null,[a[9]||(a[9]=t("h1",{class:"text-2xl font-bold text-secondary-800"}," Sistema de Portaria ",-1)),t("p",ja,"Bem-vindo, "+S($(r)?.email),1)]),T(le,{onClick:_,variant:"outline",size:"sm",icon:$(fe)},{default:G(()=>[...a[10]||(a[10]=[B(" Sair ",-1)])]),_:1},8,["icon"])])])]),t("div",Ha,[t("div",Ra,[t("div",Fa,[t("h2",Ia,[T($(ye),{class:"h-6 w-6 mr-2 text-success-500"}),a[11]||(a[11]=B(" Entrada de Funcion√°rio ",-1))]),t("form",{onSubmit:Ue(Dt,["prevent"]),class:"space-y-4"},[T(Ze,{modelValue:c.value.nome,"onUpdate:modelValue":a[0]||(a[0]=n=>c.value.nome=n),label:"Nome do Funcion√°rio",placeholder:"Digite o nome completo","prefix-icon":$(Oe),required:"",size:"md"},null,8,["modelValue","prefix-icon"]),T(Ze,{modelValue:c.value.cargo,"onUpdate:modelValue":a[1]||(a[1]=n=>c.value.cargo=n),label:"Cargo/Setor",placeholder:"Ex: Desenvolvedor, RH, Vendas","prefix-icon":$(Te),size:"md"},null,8,["modelValue","prefix-icon"]),T(le,{type:"submit",variant:"success",size:"md",icon:$(Ge),"full-width":""},{default:G(()=>[...a[12]||(a[12]=[B(" Registrar Entrada ",-1)])]),_:1},8,["icon"])],32)]),t("div",Na,[t("h2",Ba,[T($(fe),{class:"h-6 w-6 mr-2 text-danger-500"}),a[13]||(a[13]=B(" Sa√≠da de Funcion√°rio ",-1))]),t("form",{onSubmit:Ue(kt,["prevent"]),class:"space-y-4"},[t("div",null,[a[14]||(a[14]=t("label",{class:"block text-sm font-semibold text-secondary-700 mb-2"}," Selecionar Funcion√°rio ",-1)),T($(Ea),{modelValue:x.value.funcionarioId,"onUpdate:modelValue":a[2]||(a[2]=n=>x.value.funcionarioId=n)},{default:G(()=>[t("div",Va,[T($(Sa),{class:"relative w-full cursor-default rounded-xl bg-white py-3 pl-4 pr-12 text-left border-2 border-neutral-200 focus:outline-none focus:ring-2 focus:ring-danger-400 focus:border-danger-400 transition-colors duration-200"},{default:G(()=>[x.value.funcionarioId?(D(),C("span",qa,S(oe.value?.nome)+" - "+S(oe.value?.cargo),1)):(D(),C("span",za," Selecione um funcion√°rio ")),t("span",Ua,[T($(Je),{class:"h-5 w-5 text-neutral-400"})])]),_:1}),T(Mt,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:G(()=>[T($(Da),{class:"absolute z-10 mt-2 max-h-60 w-full overflow-auto rounded-xl bg-white py-2 text-base shadow-strong ring-1 ring-black/5 focus:outline-none border border-neutral-100"},{default:G(()=>[(D(!0),C(ee,null,se($(V),n=>(D(),xe($(ka),{key:n.id,value:n.id,as:"template"},{default:G(({active:j,selected:de})=>[t("li",{class:Y([j?"bg-danger-50 text-danger-900":"text-secondary-900","relative cursor-default select-none py-3 pl-12 pr-4 transition-colors duration-150"])},[t("span",{class:Y([de?"font-semibold":"font-medium","block truncate"])},S(n.nome)+" - "+S(n.cargo),3),de?(D(),C("span",Wa,[T($(Ge),{class:"h-5 w-5"})])):Z("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),T(le,{type:"submit",variant:"danger",size:"md",icon:$(Qe),disabled:!x.value.funcionarioId,"full-width":""},{default:G(()=>[...a[15]||(a[15]=[B(" Registrar Sa√≠da ",-1)])]),_:1},8,["icon","disabled"])],32)])]),t("div",Ka,[T(P,{title:"Movimenta√ß√£o de Hoje",type:"line",data:p.value,"summary-stats":w.value,onRefresh:i,onPeriodChange:f},null,8,["data","summary-stats"]),w.value&&w.value.length>0?(D(),C("div",Za,[(D(!0),C(ee,null,se(w.value,n=>(D(),xe(I,{key:n.label,title:n.label,value:n.value,icon:n.label==="Entradas"?"arrow-up":n.label==="Sa√≠das"?"arrow-down":"chart",color:n.label==="Entradas"?"success":n.label==="Sa√≠das"?"warning":"primary"},null,8,["title","value","icon","color"]))),128))])):Z("",!0)]),t("div",Qa,[t("div",Ga,[t("h3",Ja,[T($(Ce),{class:"h-7 w-7 mr-3 text-primary-500"}),a[16]||(a[16]=B(" Funcion√°rios Presentes ",-1)),t("span",Xa,S($(V).length),1)]),T(le,{onClick:ue,variant:"outline",size:"sm",icon:$(Nt)},{default:G(()=>[...a[17]||(a[17]=[B(" Atualizar ",-1)])]),_:1},8,["icon"])]),t("div",Ya,[t("button",{onClick:a[3]||(a[3]=n=>N.value="cards"),class:Y(["px-4 py-2 font-medium text-sm transition-colors",N.value==="cards"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-800"])}," Cards ",2),t("button",{onClick:a[4]||(a[4]=n=>N.value="lista"),class:Y(["px-4 py-2 font-medium text-sm transition-colors",N.value==="lista"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-800"])}," Lista de Presen√ßa ",2)]),$(V).length===0?(D(),C("div",eo,[T($(Xe),{class:"h-16 w-16 text-neutral-300 mb-4"}),a[18]||(a[18]=t("p",{class:"text-lg font-medium"}," Nenhum funcion√°rio presente no momento ",-1)),a[19]||(a[19]=t("p",{class:"text-sm mt-1"}," Os funcion√°rios aparecer√£o aqui ap√≥s registrar entrada ",-1))])):N.value==="cards"?(D(),C("div",to,[(D(!0),C(ee,null,se($(V),n=>(D(),C("div",{key:n.id,class:"border border-neutral-200 rounded-lg p-2 hover:shadow-md transition-all duration-200 hover:border-primary-300 bg-white"},[t("div",ao,[t("div",oo,[t("h4",ro,[T($(Oe),{class:"h-3 w-3 mr-1 text-primary-500 flex-shrink-0"}),B(" "+S(n.nome),1)]),t("div",so,[n.origem==="transportadoras"?(D(),C("span",no," üöö Transportadora ")):n.origem==="sfl"?(D(),C("span",lo," üè¢ SFL ")):(D(),C("span",io," üî• Incinerador "))]),t("p",co,[T($(Te),{class:"h-2.5 w-2.5 mr-1 text-neutral-400 flex-shrink-0"}),B(" "+S(n.cargo),1)]),n.matricula?(D(),C("p",uo,[T($(we),{class:"h-2.5 w-2.5 mr-1 text-neutral-400 flex-shrink-0"}),B(" Mat: "+S(n.matricula),1)])):Z("",!0),n.origem==="transportadoras"&&n.filial?(D(),C("p",mo," üè≠ "+S(n.filial),1)):Z("",!0),t("p",fo,[T($(me),{class:"h-2.5 w-2.5 mr-1 text-neutral-400 flex-shrink-0"}),B(" "+S(ge(n.horaEntrada)),1)]),n.dataEntrada?(D(),C("p",po," üìÖ "+S(ke(n.dataEntrada)),1)):Z("",!0)]),a[20]||(a[20]=t("div",{class:"ml-1 flex flex-col items-center flex-shrink-0"},[t("div",{class:"w-1.5 h-1.5 bg-success-500 rounded-full animate-pulse"}),t("span",{class:"text-[9px] text-success-600 font-medium mt-0.5"},"Online")],-1))])]))),128))])):N.value==="lista"?(D(),C("div",vo,[(D(!0),C(ee,null,se($(V),n=>(D(),C("div",{key:n.id,class:"flex items-center justify-between p-3 border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors"},[t("div",ho,[t("div",bo,[t("span",go,S(n.nome),1),n.origem==="transportadoras"?(D(),C("span",xo," üöö Transportadora ")):n.origem==="sfl"?(D(),C("span",yo," üè¢ SFL ")):(D(),C("span",wo," üî• Incinerador "))]),t("div",_o,[t("span",null,S(n.cargo),1),n.origem==="transportadoras"&&n.filial?(D(),C("span",Eo," üè≠ "+S(n.filial),1)):Z("",!0),t("span",null,"‚è∞ "+S(ge(n.horaEntrada)),1)])]),a[21]||(a[21]=t("input",{type:"checkbox",class:"w-5 h-5 text-primary-600 border-neutral-300 rounded focus:ring-2 focus:ring-primary-500 cursor-pointer"},null,-1))]))),128))])):Z("",!0)]),t("div",So,[t("div",Do,[t("div",ko,[t("h3",$o,[T($(we),{class:"h-5 w-5 mr-2"}),a[22]||(a[22]=B(" Centro de Controle ",-1))]),t("div",Co,[t("div",Oo,[T($(me),{class:"h-4 w-4 text-white"}),$e(t("input",{type:"date","onUpdate:modelValue":a[5]||(a[5]=n=>m.value=n),class:"bg-transparent text-white text-sm font-medium border-none focus:outline-none focus:ring-0 cursor-pointer",max:new Date().toISOString().split("T")[0]},null,8,To),[[We,m.value]]),m.value===new Date().toISOString().split("T")[0]?(D(),C("span",Po," HOJE ")):Z("",!0)]),t("div",Mo,[(D(),C(ee,null,se(Q,(n,j)=>t("button",{key:j,onClick:de=>K.value=j,class:Y(["px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200",K.value===j?"bg-white text-primary-600 shadow-md":"text-primary-100 hover:text-white hover:bg-primary-400"])},S(n.nome),11,Ao)),64))])])]),t("div",Lo,[t("div",jo,[t("div",Ho,S(re.value),1),a[23]||(a[23]=t("div",{class:"text-primary-100 text-xs"},"Movimenta√ß√µes",-1))]),t("div",Ro,[t("div",Fo,S($(V).length),1),a[24]||(a[24]=t("div",{class:"text-primary-100 text-xs"},"Presentes",-1))]),t("div",Io,[t("div",No,S(Ve.value),1),a[25]||(a[25]=t("div",{class:"text-primary-100 text-xs"},"Pico do Dia",-1))]),t("div",Bo,[t("div",Vo,S(ze.value),1),a[26]||(a[26]=t("div",{class:"text-primary-100 text-xs"},"Tempo M√©dio",-1))])])]),t("div",zo,[t("div",qo,[t("div",null,[T(P,{title:"Entradas x Sa√≠das",type:"line",data:p.value,onRefresh:i,onPeriodChange:f},null,8,["data"])])])]),t("div",Uo,[K.value===0?(D(),C("div",Wo,[t("div",Ko,[t("div",Zo,[t("div",Qo,[t("div",null,[a[27]||(a[27]=t("h4",{class:"text-xl font-semibold text-secondary-800"}," Timeline do Dia ",-1)),t("p",Go,S(ie.value.length)+" "+S(ie.value.length===1?"movimenta√ß√£o":"movimenta√ß√µes")+" encontradas ",1)]),t("div",Jo,[t("div",Xo,[$e(t("select",{"onUpdate:modelValue":a[6]||(a[6]=n=>X.value=n),class:"w-full sm:w-auto pl-3 pr-8 py-2.5 border border-neutral-300 rounded-lg text-sm bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all cursor-pointer appearance-none"},[...a[28]||(a[28]=[t("option",{value:""},"üìã Todos os tipos",-1),t("option",{value:"entrada"},"‚úì Entradas apenas",-1),t("option",{value:"saida"},"‚úó Sa√≠das apenas",-1)])],512),[[Pt,X.value]]),T($(Je),{class:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 pointer-events-none"})]),t("div",Yo,[T($(Oe),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 pointer-events-none"}),$e(t("input",{"onUpdate:modelValue":a[7]||(a[7]=n=>U.value=n),type:"text",placeholder:"Buscar por nome ou cargo...",class:"w-full pl-9 pr-3 py-2.5 border border-neutral-300 rounded-lg text-sm bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all"},null,512),[[We,U.value]]),U.value?(D(),C("button",{key:0,onClick:a[8]||(a[8]=n=>U.value=""),class:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors"},[T($(Qe),{class:"h-4 w-4"})])):Z("",!0)])])]),ie.value.length===0?(D(),C("div",er,[T($(Vt),{class:"h-20 w-20 text-neutral-300 mb-4 mx-auto"}),a[29]||(a[29]=t("p",{class:"text-lg font-semibold text-neutral-600"}," Nenhum registro encontrado ",-1)),a[30]||(a[30]=t("p",{class:"text-sm text-neutral-500 mt-2"}," Os registros aparecer√£o aqui conforme as movimenta√ß√µes ",-1))])):(D(),C("div",tr,[a[32]||(a[32]=t("div",{class:"absolute left-5 top-4 bottom-4 w-0.5 bg-gradient-to-b from-primary-300 via-primary-400 to-primary-300"},null,-1)),(D(!0),C(ee,null,se(ie.value,(n,j)=>(D(),C("div",{key:n.id,class:"relative flex items-start group"},[t("div",ar,[t("div",{class:Y(["flex items-center justify-center w-10 h-10 rounded-full border-3 border-white shadow-lg transition-all duration-300 group-hover:scale-110",n.tipo==="entrada"?"bg-gradient-to-br from-success-500 to-success-600":"bg-gradient-to-br from-danger-500 to-danger-600"])},[n.tipo==="entrada"?(D(),xe($(ye),{key:0,class:"h-5 w-5 text-white"})):(D(),xe($(fe),{key:1,class:"h-5 w-5 text-white"}))],2)]),t("div",{class:Y(["ml-5 flex-1 p-3 rounded-lg border transition-all duration-300 group-hover:shadow-md",n.tipo==="entrada"?"border-l-4 border-l-success-500 bg-white hover:bg-success-50/30":"border-l-4 border-l-danger-500 bg-white hover:bg-danger-50/30"])},[t("div",or,[t("div",rr,[t("div",sr,[t("div",nr,S(ge(n.hora)),1),t("div",lr,S($t(n.hora)),1)]),a[31]||(a[31]=t("div",{class:"h-12 w-px bg-neutral-200"},null,-1)),t("div",ir,[t("div",dr,[t("h5",cr,S(n.nome),1),t("span",{class:Y(["inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-bold uppercase",n.tipo==="entrada"?"bg-success-100 text-success-700":"bg-danger-100 text-danger-700"])},S(n.tipo==="entrada"?"‚úì Entrada":"‚úó Sa√≠da"),3)]),t("div",ur,[t("span",mr,[T($(Te),{class:"h-3 w-3 mr-1 text-neutral-400"}),B(" "+S(n.funcao||"Sem cargo"),1)]),n.matricula?(D(),C("span",fr,[T($(we),{class:"h-3 w-3 mr-1 text-neutral-400"}),B(" Mat: "+S(n.matricula),1)])):Z("",!0)])])]),t("div",{class:Y(["w-2 h-2 rounded-full flex-shrink-0",n.tipo==="entrada"?"bg-success-500 animate-pulse":"bg-danger-500"])},null,2)])],2)]))),128))]))]),t("div",pr,[t("div",vr,[t("div",hr,[t("h4",br,[T($(we),{class:"h-4 w-4 mr-1.5"}),a[33]||(a[33]=B(" Resumo ",-1))]),t("p",gr,S(ke(new Date)),1)]),t("div",xr,[t("div",yr,[t("div",wr,[t("div",_r,[T($(ye),{class:"h-3.5 w-3.5 text-white"})]),t("div",null,[a[34]||(a[34]=t("p",{class:"text-[10px] font-medium text-success-700 uppercase"}," Entradas ",-1)),t("p",Er,S(Ie.value),1)])])]),t("div",Sr,[t("div",Dr,[t("div",kr,[T($(fe),{class:"h-3.5 w-3.5 text-white"})]),t("div",null,[a[35]||(a[35]=t("p",{class:"text-[10px] font-medium text-danger-700 uppercase"}," Sa√≠das ",-1)),t("p",$r,S(Ne.value),1)])])]),t("div",Cr,[t("div",Or,[t("div",Tr,[T($(Ce),{class:"h-3.5 w-3.5 text-white"})]),t("div",null,[a[36]||(a[36]=t("p",{class:"text-[10px] font-medium text-primary-700 uppercase"}," Presentes ",-1)),t("p",Pr,S($(V).length),1)])])]),a[40]||(a[40]=t("div",{class:"border-t border-neutral-200 my-2"},null,-1)),t("div",Mr,[t("div",Ar,[t("span",Lr,[T($(me),{class:"h-3 w-3 mr-1.5 text-neutral-400"}),a[37]||(a[37]=B(" Total ",-1))]),t("span",jr,S(re.value),1)]),t("div",Hr,[t("span",Rr,[T($(Xe),{class:"h-3 w-3 mr-1.5 text-neutral-400"}),a[38]||(a[38]=B(" √önicos ",-1))]),t("span",Fr,S(Be.value),1)]),t("div",Ir,[t("span",Nr,[T($(me),{class:"h-3 w-3 mr-1.5 text-neutral-400"}),a[39]||(a[39]=B(" Tempo M√©dio ",-1))]),t("span",Br,S(ze.value),1)])])])])])])])):Z("",!0),K.value===1?(D(),C("div",Vr,[a[48]||(a[48]=t("h4",{class:"text-xl font-semibold text-secondary-800 mb-6"}," M√©tricas e An√°lises ",-1)),t("div",zr,[t("div",qr,[t("div",Ur,[t("div",Wr,[T($(ye),{class:"h-6 w-6 text-white"})]),t("div",Kr,[t("div",Zr,S(Ie.value),1),a[41]||(a[41]=t("div",{class:"text-blue-600 text-sm"},"Entradas Hoje",-1))])])]),t("div",Qr,[t("div",Gr,[t("div",Jr,[T($(fe),{class:"h-6 w-6 text-white"})]),t("div",Xr,[t("div",Yr,S(Ne.value),1),a[42]||(a[42]=t("div",{class:"text-purple-600 text-sm"},"Sa√≠das Hoje",-1))])])]),t("div",es,[t("div",ts,[t("div",as,[T($(Ce),{class:"h-6 w-6 text-white"})]),t("div",os,[t("div",rs,S(Be.value),1),a[43]||(a[43]=t("div",{class:"text-green-600 text-sm"}," Funcion√°rios Ativos ",-1))])])]),t("div",ss,[t("div",ns,[t("div",ls,[T($(me),{class:"h-6 w-6 text-white"})]),t("div",is,[t("div",ds,S(yt.value),1),a[44]||(a[44]=t("div",{class:"text-orange-600 text-sm"},"Horas Trabalhadas",-1))])])])]),t("div",cs,[a[45]||(a[45]=t("h5",{class:"font-semibold text-secondary-800 mb-4"}," Movimenta√ß√£o por Hora ",-1)),t("div",us,[(D(!0),C(ee,null,se(qe.value,n=>(D(),C("div",{key:n.label,class:"flex-1 flex flex-col items-center"},[t("div",{class:"bg-gradient-to-t from-primary-500 to-primary-400 rounded-t-lg transition-all duration-500 hover:from-primary-600 hover:to-primary-500",style:At({height:`${n.count/wt.value*100}%`,minHeight:"4px"})},null,4),t("div",ms,S(n.label)+"h ",1)]))),128))])]),t("div",fs,[a[47]||(a[47]=t("h5",{class:"font-semibold text-indigo-800 mb-4"}," üèÜ Top Funcion√°rios do Dia ",-1)),t("div",ps,[(D(!0),C(ee,null,se(_t.value,(n,j)=>(D(),C("div",{key:n.nome,class:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm"},[t("div",vs,[t("div",{class:Y(["w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm",j===0?"bg-yellow-500":j===1?"bg-gray-400":j===2?"bg-amber-600":"bg-indigo-500"])},S(j+1),3),t("div",hs,[t("div",bs,S(n.nome),1),t("div",gs,S(n.cargo),1)])]),t("div",xs,[t("div",ys,S(n.movimentacoes),1),a[46]||(a[46]=t("div",{class:"text-xs text-indigo-600"},"movimenta√ß√µes",-1))])]))),128))])])])):Z("",!0),K.value===2?(D(),C("div",ws,[t("div",_s,[a[52]||(a[52]=t("h4",{class:"text-xl font-semibold text-secondary-800"}," Relat√≥rios e Exporta√ß√£o ",-1)),t("div",Es,[T(le,{variant:"outline",size:"sm"},{default:G(()=>[...a[49]||(a[49]=[B(" üìä Exportar Excel ",-1)])]),_:1}),T(le,{variant:"outline",size:"sm"},{default:G(()=>[...a[50]||(a[50]=[B(" üìÑ Gerar PDF ",-1)])]),_:1}),T(le,{variant:"primary",size:"sm"},{default:G(()=>[...a[51]||(a[51]=[B(" üìß Enviar Email ",-1)])]),_:1})])]),t("div",Ss,[t("div",Ds,[a[53]||(a[53]=t("h5",{class:"font-semibold text-teal-800 mb-3"}," üìÖ Per√≠odo Analisado ",-1)),a[54]||(a[54]=t("div",{class:"text-2xl font-bold text-teal-700"},"Hoje",-1)),t("div",ks,S(ke(new Date)),1)]),t("div",$s,[a[55]||(a[55]=t("h5",{class:"font-semibold text-pink-800 mb-3"}," ‚ö° Hor√°rio de Pico ",-1)),t("div",Cs,S(Et.value),1),a[56]||(a[56]=t("div",{class:"text-pink-600 text-sm"},"Maior movimenta√ß√£o",-1))]),t("div",Os,[a[57]||(a[57]=t("h5",{class:"font-semibold text-cyan-800 mb-3"},"üìà Efici√™ncia",-1)),t("div",Ts,S(St.value)+"% ",1),a[58]||(a[58]=t("div",{class:"text-cyan-600 text-sm"},"Taxa de processamento",-1))])]),t("div",Ps,[a[61]||(a[61]=t("div",{class:"bg-neutral-50 px-6 py-4 border-b border-neutral-200"},[t("h5",{class:"font-semibold text-secondary-800"}," Registro Detalhado ")],-1)),t("div",Ms,[t("table",As,[a[60]||(a[60]=t("thead",{class:"bg-neutral-50 sticky top-0"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase"}," Hor√°rio "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase"}," Funcion√°rio "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase"}," Cargo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase"}," Tipo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase"}," Status ")])],-1)),t("tbody",Ls,[(D(!0),C(ee,null,se(H.value,n=>(D(),C("tr",{key:n.id,class:"hover:bg-neutral-50"},[t("td",js,S(ge(n.hora)),1),t("td",Hs,S(n.nome),1),t("td",Rs,S(n.funcao||"Sem cargo"),1),t("td",Fs,[t("span",{class:Y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",n.tipo==="entrada"?"bg-success-100 text-success-800":"bg-danger-100 text-danger-800"])},S(n.tipo.charAt(0).toUpperCase()+n.tipo.slice(1)),3)]),a[59]||(a[59]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-secondary-600"}," ‚úÖ Processado ",-1))]))),128))])])])])])):Z("",!0)])])])])}}};export{Js as default};
