import{g as s,h as r,n as l,i as c}from"./CQA7Wwdt.js";import"./BD3EHYnG.js";const v=s(async n=>{let t,i;if(console.log("üõ°Ô∏è Middleware auth executado para:",n.path),!(typeof window>"u"))try{const a=r("auth.ready",()=>!1),e=r("auth.user",()=>null);if(console.log("‚è≥ Middleware: authReady inicial =",a.value),console.log("üë§ Middleware: user.value inicial =",e.value?.email||"null"),a.value){if(console.log("‚úÖ Auth j√° pronto, verificando usu√°rio..."),e.value?.id){console.log("‚úÖ Middleware: Usu√°rio autenticado -",e.value.email);return}return console.log("‚ùå Middleware: Sem autentica√ß√£o - redirecionando para /login"),l("/login")}let o=0;const u=100;for(;!a.value&&o<u;)o%10===0&&console.log("‚è≥ Aguardando auth.ready... tentativa",o+1,"user:",e.value?.email||"null"),[t,i]=c(()=>new Promise(d=>setTimeout(d,100))),await t,i(),o++;if(console.log("‚úÖ Middleware: Auth inicializado ap√≥s",o,"tentativas, authReady =",a.value,", user =",e.value?.email||"null"),e.value?.id){console.log("‚úÖ Middleware: Usu√°rio autenticado -",e.value.email);return}return console.log("‚ùå Middleware: Sem autentica√ß√£o - redirecionando para /login"),l("/login")}catch(a){return console.error("‚ùå Middleware auth: Erro -",a),l("/login")}});export{v as default};
