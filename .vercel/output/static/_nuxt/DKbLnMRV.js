import{c as _,u as T}from"./CQA7Wwdt.js";import{$ as v,a3 as n,X as i,W as c,P as r,a4 as b,a7 as g,a6 as B,U as f,a5 as d,b as m}from"./BD3EHYnG.js";const k={class:"p-6"},V={class:"space-y-4"},w={key:0,class:"mt-6 p-4 bg-gray-100 rounded"},S={class:"text-sm mt-2 overflow-auto"},N={key:1,class:"mt-6 p-4 bg-red-100 rounded"},h={class:"text-sm mt-2 overflow-auto text-red-700"},E={__name:"teste-supabase",setup(J){const u=_(),s=m(!1),t=m(null),o=m(null),p=async()=>{s.value=!0,t.value=null,o.value=null;try{console.log("ðŸ§ª Testando conexÃ£o bÃ¡sica...");const{data:a,error:e}=await u.from("colaboradores").select("count",{count:"exact",head:!0});e?o.value=e:t.value={sucesso:!0,count:a,message:"ConexÃ£o funcionando! Tabela colaboradores acessÃ­vel."}}catch(a){o.value=a}finally{s.value=!1}},C=async()=>{s.value=!0,t.value=null,o.value=null;try{console.log("ðŸ” Verificando permissÃµes e estrutura...");const{data:a,error:e}=await u.from("colaboradores").select("*").limit(1);t.value={tabela_acessivel:!e,primeiro_registro:a?.[0]||null,erro_acesso:e,message:e?"Tabela nÃ£o acessÃ­vel":"Tabela acessÃ­vel"},e&&(o.value=e)}catch(a){o.value=a}finally{s.value=!1}},y=async()=>{s.value=!0,t.value=null,o.value=null;try{console.log("ðŸ” Verificando tabela colaboradores...");const{data:a,error:e,count:l}=await u.from("colaboradores").select("*",{count:"exact"}).limit(5);t.value={data:a,error:e,count:l,total_registros:l},e&&(o.value=e)}catch(a){o.value=a}finally{s.value=!1}},x=async()=>{s.value=!0,t.value=null,o.value=null;try{console.log("âž• Criando colaborador de teste...");const a={matricula:99999,nome:"JoÃ£o Teste",funcao:"Desenvolvedor",filial:"Matriz"},{data:e,error:l}=await u.from("colaboradores").insert([a]).select();t.value={data:e,error:l,message:e?"Colaborador criado com sucesso!":"Falha ao criar colaborador"},l&&(o.value=l)}catch(a){o.value=a}finally{s.value=!1}};return T({title:"Teste Supabase - Sistema de Portaria"}),(a,e)=>{const l=B("BaseButton");return f(),v("div",k,[e[6]||(e[6]=n("h1",{class:"text-2xl font-bold mb-4"},"Teste de ConexÃ£o Supabase",-1)),n("div",V,[i(l,{onClick:p,loading:r(s)},{default:c(()=>[...e[0]||(e[0]=[d(" Testar ConexÃ£o BÃ¡sica ",-1)])]),_:1},8,["loading"]),i(l,{onClick:C,loading:r(s)},{default:c(()=>[...e[1]||(e[1]=[d(" Verificar PermissÃµes ",-1)])]),_:1},8,["loading"]),i(l,{onClick:y,loading:r(s)},{default:c(()=>[...e[2]||(e[2]=[d(" Verificar Colaboradores ",-1)])]),_:1},8,["loading"]),i(l,{onClick:x,loading:r(s)},{default:c(()=>[...e[3]||(e[3]=[d(" Criar Colaborador de Teste ",-1)])]),_:1},8,["loading"])]),r(t)?(f(),v("div",w,[e[4]||(e[4]=n("h3",{class:"font-bold"},"Resultado:",-1)),n("pre",S,b(JSON.stringify(r(t),null,2)),1)])):g("",!0),r(o)?(f(),v("div",N,[e[5]||(e[5]=n("h3",{class:"font-bold text-red-800"},"Erro:",-1)),n("pre",h,b(JSON.stringify(r(o),null,2)),1)])):g("",!0)])}}};export{E as default};
