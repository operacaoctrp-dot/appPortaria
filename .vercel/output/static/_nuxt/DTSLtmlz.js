import{_ as $}from"./CPKVDWOJ.js";import{n as C}from"./CQA7Wwdt.js";import{U as i,$ as n,a3 as t,J as B,X as o,P as d,a7 as f,a4 as x,aa as N,W as v,b as u,a5 as g}from"./BD3EHYnG.js";import{_ as T}from"./vMbIc8Zx.js";import{_ as b}from"./DRujum_f.js";import{u as j}from"./BDzxMlPQ.js";import{r as q,a as R}from"./-0hij3yz.js";import{r as D}from"./B0DfXmFT.js";import"./DzHiA6Ss.js";function L(h,r){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function M(h,r){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}const S={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-secondary-50 p-4"},z={class:"w-full max-w-md"},A={class:"bg-white rounded-2xl shadow-card p-8"},H={class:"text-center mb-8"},P={class:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4"},U={key:0,class:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg"},Z={class:"flex items-start"},F={key:1,class:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg"},I={class:"flex items-start"},J={class:"text-sm text-red-800"},O={key:0,class:"text-sm text-red-600 -mt-4"},W={class:"text-center"},X={key:3,class:"space-y-4"},oe=B({__name:"recuperar-senha",setup(h){const r=u(""),l=u(""),s=u(""),m=u(!1),c=u(!1),{resetPassword:w}=j(),y=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),_=()=>(l.value="",r.value.trim()?y(r.value)?!0:(l.value="Digite um e-mail v√°lido (exemplo: usuario@email.com)",!1):(l.value="E-mail √© obrigat√≥rio",!1)),k=async()=>{try{if(s.value="",m.value=!1,!_())return;const{error:a}=await w(r.value.trim());if(a)switch(a.message){case"User not found":s.value="E-mail n√£o cadastrado no sistema";break;case"Email not confirmed":s.value="E-mail n√£o confirmado. Verifique sua caixa de entrada primeiro";break;default:s.value=`Erro ao enviar e-mail: ${a.message}`,console.error("Erro detalhado:",a)}else m.value=!0}catch(a){console.error("üî¥ Erro cr√≠tico na recupera√ß√£o:",a);const e=a&&typeof a=="object"&&"message"in a?String(a.message):"Erro inesperado. Tente novamente em alguns instantes";s.value=e}},E=()=>{r.value="",l.value="",s.value="",m.value=!1};return(a,e)=>{const V=$;return i(),n("div",S,[t("div",z,[t("div",A,[t("div",H,[t("div",P,[o(d(L),{class:"h-8 w-8 text-primary-600"})]),e[3]||(e[3]=t("h1",{class:"text-2xl font-bold text-secondary-900 mb-2"}," Recuperar Senha ",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-secondary-600"}," Digite seu e-mail para receber instru√ß√µes de recupera√ß√£o ",-1))]),m.value?(i(),n("div",U,[t("div",Z,[o(d(q),{class:"h-5 w-5 text-green-500 mt-0.5 mr-3 flex-shrink-0"}),e[5]||(e[5]=t("div",null,[t("p",{class:"text-sm font-medium text-green-800"}," E-mail enviado com sucesso! "),t("p",{class:"text-sm text-green-700 mt-1"}," Verifique sua caixa de entrada e clique no link para redefinir sua senha. ")],-1))])])):f("",!0),s.value?(i(),n("div",F,[t("div",I,[o(d(R),{class:"h-5 w-5 text-red-500 mt-0.5 mr-3 flex-shrink-0"}),t("p",J,x(s.value),1)])])):f("",!0),m.value?(i(),n("div",X,[o(b,{variant:"secondary",size:"lg","full-width":"",onClick:e[2]||(e[2]=p=>("navigateTo"in a?a.navigateTo:d(C))("/login"))},{default:v(()=>[...e[7]||(e[7]=[g(" Voltar para o Login ",-1)])]),_:1}),t("button",{onClick:E,class:"w-full text-sm text-secondary-600 hover:text-secondary-800 transition-colors"}," N√£o recebeu o e-mail? Tentar novamente ")])):(i(),n("form",{key:2,onSubmit:N(k,["prevent"]),class:"space-y-6"},[o(T,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p),label:"E-mail",type:"email",placeholder:"Digite seu e-mail cadastrado","prefix-icon":d(D),autocomplete:"email",required:"",size:"md",disabled:c.value,onBlur:_,onInput:e[1]||(e[1]=p=>l.value="")},null,8,["modelValue","prefix-icon","disabled"]),l.value?(i(),n("p",O,x(l.value),1)):f("",!0),o(b,{type:"submit",variant:"primary",size:"lg",loading:c.value,disabled:c.value||!r.value,"full-width":""},{icon:v(()=>[o(d(M),{class:"h-5 w-5"})]),default:v(()=>[g(" "+x(c.value?"Enviando...":"Enviar E-mail de Recupera√ß√£o"),1)]),_:1},8,["loading","disabled"]),t("div",W,[o(V,{to:"/login",class:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors"},{default:v(()=>[...e[6]||(e[6]=[g(" ‚Üê Voltar para o login ",-1)])]),_:1})])],32))]),e[8]||(e[8]=t("div",{class:"mt-6 text-center"},[t("p",{class:"text-sm text-secondary-600"}," O e-mail pode levar alguns minutos para chegar. Verifique tamb√©m sua caixa de spam. ")],-1))])])}}});export{oe as default};
